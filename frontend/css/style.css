/* Reset some defaults */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
}

body {
    font-family: 'Inter', Arial, sans-serif;
    background: linear-gradient(135deg, #e6eeff 0%, #c3dafe 100%);
    color: #2d3748;
    min-height: 100vh;
    min-width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-x: hidden;
}

/* Full viewport height, center everything */
.page-center {
    min-height: 100vh;
    width: 100vw;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Container improvements */
.container {
    width: 100%;
    max-width: 1020px;
    min-height: 80vh;
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 10px 40px rgba(50,80,200,0.10), 0 1.5px 8px rgba(60, 70, 140, 0.05);
    padding: 200px 32px 28px 32px;  /* Reduced padding */
    display: flex;
    flex-direction: column;
    margin: 0 16px;
    justify-content: center;
}

header {
    text-align: center;
    margin-bottom: 28px;
}
.logo {
    font-size: 2.1rem;
    vertical-align: middle;
}
h1 {
    font-size: 2.0rem;
    font-weight: 800;
    color: #3366cc;
    letter-spacing: -0.5px;
}
.subtitle {
    color: #6077a8;
    margin-top: 10px;
    font-size: 1.16rem;
    font-weight: 500;
}

.card {
    background: #f5f8fa;
    border-radius: 13px;
    padding: 24px 38px 24px 38px;
    margin-bottom: 26px;
    box-shadow: 0 2px 8px rgba(100,130,170,0.05);
}

.input-switch {
    display: flex;
    gap: 8px;
    margin-bottom: 18px;
}

.switch-btn {
    flex: 1;
    padding: 0.85em 0;
    background: #e8ecf7;
    color: #2d3748;
    border: none;
    border-radius: 8px;
    font-size: 1.04em;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.18s, color 0.18s;
}

.switch-btn.active,
.switch-btn:hover {
    background: #3366cc;
    color: #fff;
}

.input-group {
    margin-bottom: 18px;
}
label {
    display: block;
    margin-bottom: 7px;
    font-weight: 500;
    font-size: 1.05em;
}
input[type="url"],
textarea {
    width: 100%;
    border: 1.4px solid #c0ccef;
    border-radius: 8px;
    font-size: 1.07em;
    padding: 1em 1.1em;
    background: #fff;
    transition: border 0.15s, box-shadow 0.15s;
    margin-bottom: 5px;
}

input[type="url"]:focus,
textarea:focus {
    border-color: #3366cc;
    outline: none;
    box-shadow: 0 0 0 2.5px #bdd4fc85;
}

textarea {
    min-height: 120px;
    resize: vertical;
}

.analyze-btn {
    width: 100%;
    padding: 1.13em 0;
    background: #3366cc;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 1.14em;
    font-weight: 800;
    cursor: pointer;
    box-shadow: 0 2px 14px #a0b3d533;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5em;
    transition: background 0.18s, transform 0.12s;
}

.analyze-btn:active {
    background: #254399;
    transform: translateY(1px);
}
.analyze-btn:disabled {
    background: #b5c4e2;
    cursor: not-allowed;
}

.spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,0.45);
    border-radius: 50%;
    border-top: 3px solid #fff;
    animation: spin 0.7s linear infinite;
    margin-right: 7px;
    vertical-align: middle;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

.error-message {
    background: #fff1f2;
    color: #c53030;
    padding: 13px 15px;
    border-radius: 7px;
    margin: 20px 0 8px 0;
    border-left: 4px solid #c53030;
    font-size: 1.09em;
    animation: fadeIn 0.2s;
}
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* --- Info sections: side by side on desktop --- */
.info-sections-row {
    display: flex;
    gap: 22px;
    margin-bottom: 22px;
    justify-content: space-between;
}

/* Info section block styling */
.info-section {
    background: #f7fafc;
    padding: 22px 19px;
    border-radius: 11px;
    color: #466088;
    font-size: 1.09em;
    flex: 1 1 0;
    min-width: 260px;
    margin-bottom: 0;
    box-shadow: 0 1px 6px rgba(100,130,170,0.04);
}
.info-section h2 {
    font-size: 1.22em;
    color: #3366cc;
    margin-bottom: 9px;
    font-weight: 700;
}
.info-section ol {
    margin-left: 25px;
    margin-top: 7px;
}
.info-section li {
    margin-bottom: 7px;
    line-height: 1.7;
}

/* Responsive: stack info sections on mobile */
@media (max-width: 900px) {
    .container {
        max-width: 99vw;
        padding: 8vw 2vw 5vw 2vw;
    }
}
@media (max-width: 799px) {
    .info-sections-row {
        flex-direction: column;
        gap: 14px;
    }
    .container {
        padding: 6vw 2vw 3vw 2vw;
        max-width: 98vw;
    }
    .info-section {
        min-width: 0;
    }
}

@media (max-width: 600px) {
    .container {
        max-width: 100vw;
        padding: 5vw 1vw 2vw 1vw;
        border-radius: 0;
    }
}

footer {
    text-align: center;
    font-size: 1.01em;
    color: #718096;
    margin-top: auto;
    padding: 18px 0 0 0;
}

/* ---------- HEADER ENHANCEMENTS ---------- */
header {
    text-align: center;
    margin-bottom: 28px;
}

.brand {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.logo {
    font-size: 2.8rem !important;
    vertical-align: middle;
    margin-right: 4px;
}

.logo-text {
    font-size: 2.35rem !important;
    font-weight: 800;
    color: #274c91;
    letter-spacing: -1px;
}

.subtitle {
    color: #5770b8;
    margin-top: 9px;
    margin-bottom: 6px;
    font-size: 1.25rem;
    font-weight: 500;
    letter-spacing: 0.01em;
    opacity: 0.92;
    text-shadow: 0 1px 4px rgba(130, 150, 255, 0.04);
}

/* ---------- CARD TITLE & BUTTONS ---------- */
.card h2 {
    font-size: 1.38rem;
    font-weight: 800;
    color: #274c91;
    letter-spacing: -0.3px;
    margin-bottom: 10px;
}

.analyze-btn {
    font-size: 1.22em;
    letter-spacing: 0.03em;
    border-radius: 10px;
    font-weight: 900;
    background: linear-gradient(90deg,#3366cc 60%, #274c91 100%);
    box-shadow: 0 3px 16px #a0b3d522;
    margin-top: 16px;
}

/* ---------- INFO SECTION TWEAKS ---------- */
.info-section {
    background: #f7faff;
    padding: 25px 20px;
    border-radius: 15px;
    color: #39517d;
    font-size: 1.13em;
    margin-bottom: 30px;
    box-shadow: 0 3px 18px rgba(100,130,170,0.03);
}

.info-section h2 {
    font-size: 1.21em;
    color: #254399;
    margin-bottom: 11px;
    font-weight: 800;
    letter-spacing: -0.1px;
}

.info-section ul,
.info-section ol {
    font-size: 1.03em;
}

.info-section li {
    margin-bottom: 8px;
    line-height: 1.85;
}

.info-section li b {
    font-weight: 700;
    color: #234178;
}

.info-sections-row {
    display: flex;
    gap: 2vw;
    margin-top: 10px;
    justify-content: space-between;
}

@media (max-width: 900px) {
    .info-sections-row {
        flex-direction: column;
        gap: 14px;
    }
    .info-section {
        margin-bottom: 12px;
    }
}

/* ---------- SUBTLE SHADOW FOR CONTAINER ---------- */
.container {
    box-shadow: 0 12px 44px 0 rgba(100, 130, 220, 0.13), 0 1.5px 8px rgba(60, 70, 140, 0.05);
}

// frontend/js/result.js

document.addEventListener("DOMContentLoaded", () => {
  const resultsSection = document.getElementById("resultsSection");
  const data = JSON.parse(sessionStorage.getItem("analysisResult") || '{}').result || {};
  if (!data) {
    resultsSection.innerHTML = `<p>No data found.</p>`;
    return;
  }

  // 1) RAG indicator
  const rag = data.rag_indicator || 'yellow';
  const ragColors = { green: '#299f4a', yellow: '#f5b100', red: '#e53e3e' };
  const ragLabels = { green: 'High Trust', yellow: 'Medium Trust', red: 'Low Trust' };

  // 2) Source Cross‑Check
  const sources = data.source_cross_check || {};
  const crossList = (sources.matches || [])
    .map(s => `<li>${s}</li>`).join('');

  // 3) Heuristic Indicators
  const h = data.heuristic || {};
  const heurList = `
    <li>Loaded Terms: ${h.loaded_terms.join(', ')}</li>
    <li>Emotion Density: ${h.emotion_density_pct}%</li>
    <li>Subjectivity: ${h.subjectivity_score}</li>
    <li>Passive Voice: ${h.passive_voice_pct}%</li>
  `;

  // 4) Technical Metadata
  const tech = data.technical || {};

  // Build HTML
  resultsSection.innerHTML = `
    <div style="text-align:center; margin-bottom:24px;">
      <span style="display:inline-block;
                   width:24px; height:24px;
                   background:${ragColors[rag]};
                   border-radius:50%;
                   margin-bottom:8px;"></span>
      <h2 style="margin:4px 0;">${ragLabels[rag]}</h2>
    </div>

    <div style="margin-bottom:18px;">
      <h3>🔗 Source Cross‑Check</h3>
      <p>Checked top ${sources.checked} Armenian sources; found matches in:</p>
      <ul>${crossList}</ul>
    </div>

    <div style="margin-bottom:18px;">
      <h3>🧩 Heuristic Indicators</h3>
      <ul>${heurList}</ul>
    </div>

    <div style="margin-bottom:18px;">
      <h3>⚙️ Technical Metadata</h3>
      <ul>
        <li>Method: ${tech.method}</li>
        <li>Sources Checked: ${tech.sources_checked}</li>
      </ul>
    </div>

    <div style="margin-bottom:18px;">
      <h3>🚩 Red Flags (${data.red_flags.length})</h3>
      <ul>${data.red_flags.map(f=>`<li>${f}</li>`).join('')}</ul>
    </div>

    <div style="margin-bottom:18px;">
      <h3>👥 Key Entities</h3>
      <ul>${data.entities.map(e=>`<li><strong>${e.name}</strong> (${e.type})</li>`).join('')}</ul>
    </div>

    <div style="margin-bottom:18px;">
      <h3>📝 Summary</h3>
      <p>${data.summary}</p>
    </div>

    <div style="text-align:right; color:#718096; font-size:0.9em;">
      Analyzed at: ${new Date(data.metadata.processed_at).toLocaleString()}
    </div>
  `;
});

.result-block {
  background: #f7fafc;
  border-radius: 11px;
  padding: 18px 19px 10px 19px;
  margin-bottom: 18px;
  box-shadow: 0 1.5px 8px rgba(60, 70, 140, 0.05);
}
.trust-label {
  font-size: 1.6rem;
  font-weight: bold;
  margin-bottom: 20px;
  letter-spacing: 0.5px;
}
.result-block h3 {
  color: #3366cc;
  font-size: 1.16em;
  margin-bottom: 8px;
}
